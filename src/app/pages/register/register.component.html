<div class="flex-container" fxLayout="row"  fxLayoutAlign="none" style="height: 100vh;">
  <div fxFlex="50%">
    <div class="loginContainer" layout-align="center center">
          <form [formGroup]="registrationForm" (ngSubmit)="onSubmit(); ">

                <h1>User Information</h1>
                <div class="form-group">
                    <mat-form-field appearance="fill" style="width:50%">
                        <mat-label>First Name</mat-label>
                        <input type="text" [formControl]="registrationForm.controls['firstName']" required matInput placeholder="First Name">
                      </mat-form-field>
                      <div *ngIf="registrationForm.controls['firstName'].invalid && (registrationForm.controls['firstName'].dirty || registrationForm.controls['firstName'].touched)">
                        <mat-error *ngIf="registrationForm.controls['firstName'].errors.required">First Name is required</mat-error>
                      </div>
                </div>

                <div class="form-group">
                    <mat-form-field appearance="fill" style="width:50%">
                        <mat-label>Last Name</mat-label>
                        <input type="text"  [formControl]="registrationForm.controls['lastName']" required matInput placeholder="Last Name">
                      </mat-form-field>
                      <div *ngIf="registrationForm.controls['lastName'].invalid && (registrationForm.controls['lastName'].dirty || registrationForm.controls['lastName'].touched)">
                        <mat-error *ngIf="registrationForm.controls['lastName'].errors.required">Last Name is required</mat-error>
                      </div>
                </div>

                <div class="form-group">
                    <mat-form-field appearance="fill" style="width:50%">
                        <mat-label>Phone Number</mat-label>
                        <input type="text"  [formControl]="registrationForm.controls['phone']" required matInput placeholder="Phone Number">
                      </mat-form-field>
                      <div *ngIf="registrationForm.controls['phone'].invalid && (registrationForm.controls['phone'].dirty || registrationForm.controls['phone'].touched)">
                        <mat-error *ngIf="registrationForm.controls['phone'].errors.required">Phone is required</mat-error>
                      </div>
                </div>

                <div class="form-group">
                    <mat-form-field appearance="fill" style="width:50%">
                        <mat-label>Address</mat-label>
                        <input type="text" [formControl]="registrationForm.controls['address']" required matInput placeholder="Address">
                      </mat-form-field>
                      <div *ngIf="registrationForm.controls['address'].invalid && (registrationForm.controls['address'].dirty || registrationForm.controls['address'].touched)">
                        <mat-error *ngIf="registrationForm.controls['address'].errors.required">Address is required</mat-error>
                      </div>
                </div>

                <div class="form-group">
                    <mat-form-field appearance="fill" style="width:50%">
                        <mat-label>Email</mat-label>
                        <input type="email" [formControl]="registrationForm.controls['email']" (keyup)="checkEmail($event)" (blur)="checkEmail($event)" email required matInput placeholder="Email">
                      </mat-form-field>
                      <br>
                      <span *ngIf="emailInUse" style="color:red;">{{emailInUse}}</span>
                      <div *ngIf="registrationForm.controls['email'].invalid && (registrationForm.controls['email'].dirty || registrationForm.controls['email'].touched)">
                        <mat-error *ngIf="registrationForm.controls['email'].errors.required">Email is required</mat-error>
                      </div>
                </div>

                <h1>Choose Username and Create Password</h1>
                <div class="form-group">
                    <mat-form-field appearance="fill" style="width:50%">
                        <mat-label>User Name</mat-label>
                        <input type="text" [formControl]="registrationForm.controls['userName']" (keyup)="checkUserName($event)" (blur)="checkUserName($event)" required matInput placeholder="Groovy nickname">
                      </mat-form-field>
                      <br>
                      <span *ngIf="userNameInUse" style="color:red;">{{userNameInUse}}</span>
                      <span *ngIf="userNameNotInUse" style="color:green;">{{userNameNotInUse}}</span>
                  </div>

                  <div *ngIf="registrationForm.controls['userName'].invalid && (registrationForm.controls['userName'].dirty || registrationForm.controls['userName'].touched)">
                    <mat-error *ngIf="registrationForm.controls['userName'].errors.required">User Name is required</mat-error>
                  </div>
                  <br/>

                  <div class="form-group">
                    <mat-form-field appearance="fill" style="width:50%">
                        <mat-label>Password</mat-label>
                        <input type="password" [formControl]="registrationForm.controls['password']"
                         minlength="8"
                        maxlength="30"
                        required matInput
                         placeholder="Create Password"
                         autocomplete="off">
                      </mat-form-field>

                      <div *ngIf="registrationForm.controls['password'].invalid && (registrationForm.controls['password'].dirty || registrationForm.controls['password'].touched)">
                        <mat-error *ngIf="registrationForm.controls['password'].errors.required">Password is required</mat-error>
                        <mat-error *ngIf="registrationForm.controls['password'].errors.minlength">Password must be at least 8 characters</mat-error>
                        <mat-error *ngIf="registrationForm.controls['password'].errors.pattern">Password does not meet requirements</mat-error>
                      </div>
                  </div>
                  <br/>

                <h1>Choose security questions and answers</h1>
                <mat-form-field appearance="fill" style="width:50%">
                    <mat-label>Select your Security Questions</mat-label>
                    <mat-select  required [(value)]="selectedValue1" name=question>
                      <mat-option [value]="option.questionText" *ngFor="let option of securityQuestions">
                        {{option.questionText}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <br/>

                    <div class="form-group">
                      <mat-form-field appearance="fill" style="width:50%">
                          <mat-label>Answer</mat-label>
                          <input type="text" matInput required [formControl]="registrationForm.controls['securityAnswer1']" autocomplete="off"/>
                        </mat-form-field>
                        <div *ngIf="registrationForm.controls['securityAnswer1'].invalid && (registrationForm.controls['securityAnswer1'].dirty || registrationForm.controls['securityAnswer1'].touched)">
                          <mat-error *ngIf="registrationForm.controls['securityAnswer1'].errors.required">Answer is required</mat-error>
                        </div>
                    </div>
                    <br/>
                  <br/>

                  <mat-form-field appearance="fill" style="width:50%">
                    <mat-label>Select your Security Questions</mat-label>
                    <mat-select name=question  required [(value)]="selectedValue2">
                      <mat-option [value]="option.questionText" *ngFor="let option of securityQuestions">
                          {{option.questionText}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <br/>

                  <div class="form-group">
                      <mat-form-field appearance="fill" style="width:50%">
                          <mat-label>Answer</mat-label>
                          <input type="text" matInput required [formControl]="registrationForm.controls['securityAnswer2']" autocomplete="off"/>
                        </mat-form-field>
                        <div *ngIf="registrationForm.controls['securityAnswer2'].invalid && (registrationForm.controls['securityAnswer2'].dirty || registrationForm.controls['securityAnswer2'].touched)">
                          <mat-error *ngIf="registrationForm.controls['securityAnswer2'].errors.required">Answer is required</mat-error>
                        </div>
                    </div>


                  <br/>
                  <mat-form-field appearance="fill" style="width:50%">
                    <mat-label>Select your Security Questions</mat-label>
                    <mat-select name=question required [(value)]="selectedValue3">
                      <mat-option [value]="option.questionText"  *ngFor="let option of securityQuestions">
                          {{option.questionText}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <br/>

                  <div class="form-group">
                      <mat-form-field appearance="fill" style="width:50%">
                          <mat-label>Answer</mat-label>
                          <input type="text" matInput required [formControl]="registrationForm.controls['securityAnswer3']" autocomplete="off"/>
                        </mat-form-field>
                        <div *ngIf="registrationForm.controls['securityAnswer3'].invalid && (registrationForm.controls['securityAnswer3'].dirty || registrationForm.controls['securityAnswer3'].touched)">
                          <mat-error *ngIf="registrationForm.controls['securityAnswer3'].errors.required">Answer is required</mat-error>
                        </div>
                    </div>

             <button mat-raised-button type="submit" [disabled]="!registrationForm.valid">Login</button>
            </form>
          </div>
      </div>

      <div fxFlex="50%">
        <div class="loginImage"></div>
      </div>
</div>
